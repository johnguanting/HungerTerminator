<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ç¬¬5é—œï¼šæƒœé£Ÿå¤§æŒ‘æˆ°</title>
  <style>
    body {
      font-family: "å¾®è»Ÿæ­£é»‘é«”", sans-serif;
      background-color: #fffbea;
      text-align: center;
      margin: 0;
      overflow: hidden;
    }
    h1 {
      margin-top: 20px;
      color: #6a994e;
    }
    #gameArea {
      position: relative;
      width: 100vw;
      height: 80vh;
      background-color: #fefae0;
      overflow: hidden;
    }
    .food {
      position: absolute;
      cursor: pointer;
      user-select: none;
    }
    .food img {
      width: 50px;
      height: 50px;
    }
    #scoreBoard {
      font-size: 1.2em;
      margin-top: 10px;
    }
    #result {
      font-size: 1.4em;
      margin-top: 20px;
      color: #333;
    }
    button {
      padding: 10px 20px;
      font-size: 1em;
      margin-top: 15px;
      border: none;
      border-radius: 5px;
      background-color: #28a745;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #218838;
    }
    #startOverlay, #failOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(255, 255, 255, 0.95);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    #startOverlay h2, #failOverlay h2 {
      color: #6a994e;
      margin-bottom: 20px;
    }
    #startOverlay p, #failOverlay p {
      width: 80%;
      max-width: 400px;
      margin-bottom: 20px;
      color: #444;
      font-size: 1.1em;
    }
    #failOverlay {
      display: none;
    }
  </style>
</head>
<body>
  <div id="startOverlay">
    <h2>ç¬¬5é—œï¼šæƒœé£Ÿå¤§æŒ‘æˆ°</h2>
    <p>è«‹é»æ“Šç•«é¢ä¸­æ‰è½çš„ã€Œå¯é£Ÿç”¨é£Ÿç‰©ã€åœ–ç‰‡ ğŸğŸğŸ¥•ï¼Œé¿é–‹ã€Œè…çˆ›é£Ÿç‰©ã€ã€‚<br>ä½ æœ‰ 30 ç§’çš„æ™‚é–“ï¼Œæº–å‚™å¥½äº†å—ï¼Ÿ</p>
    <button onclick="startGame()">é–‹å§‹éŠæˆ²</button>
  </div>

  <div id="failOverlay">
    <h2>æŒ‘æˆ°å¤±æ•— ğŸ˜¥</h2>
    <p>ä½ çš„åˆ†æ•¸æœªé” 10 åˆ†ï¼Œè«‹å†æ¥å†å²ï¼</p>
    <button onclick="restartGame()">å†æŒ‘æˆ°ä¸€æ¬¡</button>
  </div>

  <h1>ç¬¬5é—œï¼šæƒœé£Ÿå¤§æŒ‘æˆ°</h1>
  <div id="scoreBoard">åˆ†æ•¸ï¼š0ï½œå‰©é¤˜æ™‚é–“ï¼š30 ç§’</div>
  <div id="gameArea"></div>
  <div id="result"></div>

  <script>
    const gameArea = document.getElementById("gameArea");
    const scoreBoard = document.getElementById("scoreBoard");
    const result = document.getElementById("result");
    const startOverlay = document.getElementById("startOverlay");
    const failOverlay = document.getElementById("failOverlay");

    let score = 0;
    let timeLeft = 30;
    let timer;
    let gameInterval;

    const goodFoods = [
      "images/apple.png",
      "images/bread.png",
      "images/radish.png",
      "images/vegetable.png",
      "images/rice.png"
    ];

    const badFoods = [
      "images/trash.png",
      "images/skull.png",
      "images/gross.png",
      "images/spoiled.png"
    ];

    function spawnFood() {
      const food = document.createElement("div");
      food.classList.add("food");
      const isGood = Math.random() < 0.7;
      const img = document.createElement("img");
      img.src = isGood ? randomFrom(goodFoods) : randomFrom(badFoods);
      food.dataset.good = isGood ? "true" : "false";
      food.style.left = Math.random() * 90 + "vw";
      food.style.top = "-60px";
      food.appendChild(img);
      gameArea.appendChild(food);

      let top = -60;
      const fall = setInterval(() => {
        top += 3;
        food.style.top = top + "px";
        if (top > window.innerHeight) {
          clearInterval(fall);
          food.remove();
        }
      }, 30);

      food.onclick = () => {
        if (food.dataset.good === "true") {
          score += 1;
        } else {
          score -= 1;
        }
        updateScore();
        food.remove();
      };
    }

    function randomFrom(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function updateScore() {
      scoreBoard.textContent = `åˆ†æ•¸ï¼š${score}ï½œå‰©é¤˜æ™‚é–“ï¼š${timeLeft} ç§’`;
    }

    function endGame() {
      clearInterval(timer);
      clearInterval(gameInterval);
      if (score >= 10) {
        result.innerHTML = `ğŸ‰ å¤ªæ£’äº†ï¼ä½ æ˜¯æƒœé£Ÿé«˜æ‰‹ï¼Œå¾—åˆ†ï¼š${score} åˆ†ï¼<br><a href="index.html"><button>è¿”å›é¦–é </button></a>`;
      } else {
        failOverlay.style.display = "flex";
      }
    }

    function startGame() {
  document.getElementById("bgm").play();
      score = 0;
      timeLeft = 30;
      result.innerHTML = "";
      gameArea.innerHTML = "";
      failOverlay.style.display = "none";
      startOverlay.style.display = "none";
      updateScore();
      timer = setInterval(() => {
        timeLeft--;
        updateScore();
        if (timeLeft <= 0) endGame();
      }, 1000);
      gameInterval = setInterval(spawnFood, 600);
    }

    function restartGame() {
      document.querySelectorAll(".food").forEach(el => el.remove());
      result.innerHTML = "";
      gameArea.innerHTML = "";
      startGame();
    }
  </script>
<audio id="bgm" src="Carefree.mp3" loop hidden></audio>
</body>
</html>
